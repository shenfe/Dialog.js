!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.dialog=i()}(this,function(){"use strict";function t(t,i,e){for(var o=e||document,n=i.split("-"),a=1,s=n.length;a<s;a++)n[a].length&&(n[a]=n[a].charAt(0).toUpperCase()+n[a].substr(1));if(i=n.join(""),t.style[i])return t.style[i];if(t.currentStyle)return t.currentStyle[i];if(o.defaultView&&o.defaultView.getComputedStyle){i=(i=i.replace(/([A-Z])/g,"-$1")).toLowerCase();var r=o.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(i)}return null}!function(t,i){if("undefined"==typeof document)return i;t=t||"";var e=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",e.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}(".dialog-wrapper{z-index:1!important;position:fixed;top:0;left:0;width:100%;height:100%;padding:0;margin:0;border:0;text-align:center;background-color:#000 transparent;background-color:rgba(0,0,0,.4);overflow:hidden}.dialog-wrapper-noOverlay{background-color:transparent}.dialog-wrapper,.dialog-wrapper *{padding:0;margin:0}.dialog-docker{position:absolute;visibility:hidden;overflow:visible}.dialog-docker-p0{top:0;left:0;width:100%;height:100%}.dialog-wrapper .dialog{color:#000;background-color:#fff;border:10px solid #eee;border-radius:2px}.dialog-wrapper .dialog,.dialog-wrapper .dialog-unknown{margin:0 auto;visibility:visible;padding:0;overflow:auto}.dialog-wrapper .dialog-unknown{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%)}.dialog-docker-p1{top:0;left:0}.dialog-docker-p2{top:0;left:50%}.dialog-docker-p3{top:0;right:0}.dialog-docker-p4{top:50%;left:0}.dialog-docker-p5{top:50%;left:50%}.dialog-docker-p6{top:50%;right:0}.dialog-docker-p7{bottom:0;left:0}.dialog-docker-p8{bottom:0;left:50%}.dialog-docker-p9{bottom:0;right:0}.dialog-docker-p0 .dialog{margin:0;border:0}.dialog-docker-p1 .dialog{position:absolute;top:0;left:0}.dialog-docker-p2 .dialog{position:absolute;top:0;left:-50%}.dialog-docker-p3 .dialog{position:absolute;top:0;right:0}.dialog-docker-p4 .dialog{position:absolute;top:-50%;left:0}.dialog-docker-p5 .dialog{position:absolute;top:-50%;left:-50%}.dialog-docker-p6 .dialog{position:absolute;top:-50%;right:0}.dialog-docker-p7 .dialog{position:absolute;bottom:0;left:0}.dialog-docker-p8 .dialog{position:absolute;bottom:0;left:-50%}.dialog-docker-p9 .dialog{position:absolute;bottom:0;right:0}@keyframes a{0%{opacity:0}to{opacity:1}}@keyframes b{0%{transform:translateY(100px);-webkit-transform:translateY(100px);-moz-transform:translateY(100px);-ms-transform:translateY(100px);-o-transform:translateY(100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}@keyframes c{0%{transform:translateY(-100px);-webkit-transform:translateY(-100px);-moz-transform:translateY(-100px);-ms-transform:translateY(-100px);-o-transform:translateY(-100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}@keyframes d{0%{transform:translate(-100px);-webkit-transform:translate(-100px);-moz-transform:translate(-100px);-ms-transform:translate(-100px);-o-transform:translate(-100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}@keyframes e{0%{transform:translate(100px);-webkit-transform:translate(100px);-moz-transform:translate(100px);-ms-transform:translate(100px);-o-transform:translate(100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}.dialog-wrapper .slide-down,.dialog-wrapper .slide-left,.dialog-wrapper .slide-right,.dialog-wrapper .slide-up{animation-duration:.15s;animation-timing-function:ease;animation-iteration-count:1;-webkit-animation-duration:.15s;-webkit-animation-timing-function:ease;-webkit-animation-iteration-count:1;-moz-animation-duration:.15s;-moz-animation-timing-function:ease;-moz-animation-iteration-count:1;-ms-animation-duration:.15s;-ms-animation-timing-function:ease;-ms-animation-iteration-count:1;-o-animation-duration:.15s;-o-animation-timing-function:ease;-o-animation-iteration-count:1}.dialog-wrapper .slide-up{animation-name:b;-webkit-animation-name:b;-moz-animation-name:b;-ms-animation-name:b;-o-animation-name:b}.dialog-wrapper .slide-down{animation-name:c;-webkit-animation-name:c;-moz-animation-name:c;-ms-animation-name:c;-o-animation-name:c}.dialog-wrapper .slide-right{animation-name:d;-webkit-animation-name:d;-moz-animation-name:d;-ms-animation-name:d;-o-animation-name:d}.dialog-wrapper .slide-left{animation-name:e;-webkit-animation-name:e;-moz-animation-name:e;-ms-animation-name:e;-o-animation-name:e}.dialog-wrapper-fadein{animation-name:a;animation-duration:.2s;animation-timing-function:linear;animation-iteration-count:1;-webkit-animation-name:a;-webkit-animation-duration:.2s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:1;-moz-animation-name:a;-moz-animation-duration:.2s;-moz-animation-timing-function:linear;-moz-animation-iteration-count:1;-ms-animation-name:a;-ms-animation-duration:.2s;-ms-animation-timing-function:linear;-ms-animation-iteration-count:1;-o-animation-name:a;-o-animation-duration:.2s;-o-animation-timing-function:linear;-o-animation-iteration-count:1}",void 0);var i=function(t){this.constructor=i,this.timestamp=Date.now().toString(),this.id="Dialog_"+this.timestamp,this.content=t.content||"",this.onClose=t.close||function(){},this.onShow=t.show||function(){},this.onReady=t.ready||function(){},this.callbacks=t.callbacks||{},this.stay=!!t.stay,this.unknown=!!t.unknown,this.width=t.width||"100%",this.height=t.height||"auto",this.position=t.position||5,this.block=!!t.block,this.noOverlay=!!t.noMask,this.fullscreen=!!t.fullscreen,this.fullscreen&&(this.unknown=!1),this.zIndex=t.zIndex||1,this.top=t.top||0,this.right=t.right||0,this.bottom=t.bottom||0,this.left=t.left||0,this.withBorder=!!t.withBorder,this.parentEl=t.container||document.body,this.slide=t.slide,this.slideConf=t.slideConf||"200ms ease",this.fade=t.fade,this.opacity=t.opacity||"0.4";var e=parseFloat(this.opacity);(isNaN(e)||e<0||e>1)&&(this.opacity="0.4"),this._bgLock=!1,this.noOverlayOrBlock=this.noOverlay&&!this.block,this.wrapper=null,this.main=null,this.init(),t.autoShow&&this.show()};return i.prototype={_setLayout:function(t){if(!t)t=this.main;if(this.fullscreen&&(this.width="100%",this.height="100%",this.position=0),this.position>=0&&this.position<=9){t.style.width=this.width,t.style.height=this.height,t.parentNode.className=t.parentNode.className+" dialog-docker-p"+this.position,t.parentNode.style.width=this.width,t.parentNode.style.height=this.height,t.style.width="100%","auto"!=this.height&&(t.style.height="100%"),5==this.position&&"string"==typeof this.top&&"%"==this.top.charAt(this.top.length-1)&&(t.parentNode.style.top=this.top);this._setOffset(t,[[],["top","left"],["top","left"],["top","right"],["top","left"],["top","left"],["top","right"],["bottom","left"],["bottom","left"],["bottom","right"]][this.position])}},_setOffset:function(i,e){if(!i)i=this.main;if(!e)e=["top","right","bottom","left"];var o=[0,0];if(this.top&&"number"==typeof this.top&&(o[1]+=this.top),this.right&&"number"==typeof this.right&&(o[0]-=this.right),this.bottom&&"number"==typeof this.bottom&&(o[1]-=this.bottom),this.left&&"number"==typeof this.left&&(o[0]+=this.left),!this.withBorder)for(var n=0;n<e.length;n++){var a=e[n];(function(e){if("auto"!=t(i,e)){var n=t(i,"border-"+e+"-width");(n=n.split(" ")[0]).lastIndexOf("px")==n.length-2&&(n=parseFloat(n.substring(0,n.length-2)),"top"==e?o[1]-=n:"right"==e?o[0]+=n:"bottom"==e?o[1]+=n:"left"==e&&(o[0]-=n))}}).bind(this)(a)}var s="translate("+o[0]+"px,"+o[1]+"px)";i.style.transform=s,i.style.WebkitTransform=s,i.style.MozTransform=s,i.style.OTransform=s,i.style.msTransform=s,this._xoffset=o[0],this._yoffset=o[1],this._contentWidth=i.clientWidth,this._contentHeight=i.clientHeight},init:function(){var t=this.render(this.content,this.style,this.id);t.onclick=function(t){var i=(t=t||window.event).srcElement||t.target;if(i.className.indexOf("dialog-wrapper")>=0||i.className.indexOf("dialog-docker")>=0)this.block||(this.close(),this.onClose());else if(i.className.indexOf("btn-close")>=0){var e=i.getAttribute("callback");this.callbacks&&e&&this.callbacks[e]&&this.callbacks[e](),this.close(),this.onClose()}t.preventDefault?t.preventDefault():t.returnValue=!1}.bind(this),this.onReady(t),this.constructor.ResizeHandlers[this.id]=this.resize.bind(this),window.addEventListener("resize",this.constructor.ResizeHandlers[this.id]),this.constructor.Table[this.timestamp]=this},render:function(t,i,e){if(!e)e=this.id;if(!this.main||!this.wrapper){this.main&&this.main.parentNode.removeChild(this.main),this.wrapper&&this.wrapper.parentNode.removeChild(this.wrapper),this.main=null,this.wrapper=null;var o=document.createElement("div");this.unknown?o.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-unknown">{content}</div></div>':o.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-docker"><div class="dialog">{content}</div></div></div>',this.wrapper=o.getElementsByClassName("dialog-wrapper")[0],this.noOverlay||(this.wrapper.style.backgroundColor="rgba(0,0,0,"+this.opacity+")"),this.wrapper.id=e,this.wrapper.style.visibility="hidden",this.wrapper.style.zIndex=this.zIndex,this.noOverlay&&(this.wrapper.className+=" "+this.wrapper.className+"-noOverlay"),this.main=this.wrapper.getElementsByClassName(this.unknown?"dialog-unknown":"dialog")[0],this.parentEl.appendChild(this.wrapper)}return"string"==typeof t?this.main.innerHTML=t:t instanceof Node&&(this.main.innerHTML="",this.main.appendChild(t)),this.unknown?this.resize():this._setLayout(),this.hide(),this.wrapper.style.visibility="visible",this.wrapper},resize:function(t){this.unknown&&(this.main.scrollHeight<=this.wrapper.clientHeight?this.main.style.maxHeight="":(this.main.style.maxHeight=this.wrapper.clientHeight+"px",this.main.style.overflow="auto"))},show:function(){setTimeout(function(){if(!this.noOverlayOrBlock&&!this._bgLock){this._bgLock=!0,this._bodyPosition=t(document.body,"position"),this._bodyPositionInStyle=document.body.style.position,this._bodyTop=t(document.body,"top"),this._bodyTopInStyle=document.body.style.top,this._bodyLeft=t(document.body,"left"),this._bodyLeftInStyle=document.body.style.left,this._bodyWidth=document.body.style.width,this._bodyClientWidth=document.body.clientWidth;var i=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._bodyScrollTop=e,this._bodyScrollLeft=i,this._bodyOverflow=t(document.body,"overflow"),this._bodyOverflowInStyle=document.body.style.overflow,document.body.style.position="fixed",document.body.style.width=this._bodyClientWidth+"px",document.body.style.top=0-this._bodyScrollTop+"px",document.body.style.left=0-this._bodyScrollLeft+"px",document.body.style.overflow="hidden"}if((this.slide||this.fade)&&(this.fade&&this.wrapper.className.indexOf("dialog-wrapper-fadein")<0&&(this.wrapper.className+=" dialog-wrapper-fadein"),this.slide&&this.main.className.indexOf("slide-"+this.slide)<0)){var o=0,n=0;switch(this.slide){case"up":o=this._xoffset,n=this._yoffset+this._contentHeight;break;case"down":o=this._xoffset,n=this._yoffset-this._contentHeight;break;case"right":o=this._xoffset-this._contentWidth,n=this._yoffset;break;case"left":o=this._xoffset+this._contentWidth,n=this._yoffset}for(var a=["","-webkit-","-moz-","-ms-","-o-"],s=0,r=a.length;s<r;s++)this.main.style[a[s]+"transform"]="translate("+o+"px,"+n+"px)",this.main.style[a[s]+"transition"]="transform "+this.slideConf;window.setTimeout(function(){for(var t=0,i=a.length;t<i;t++)this.main.style[a[t]+"transform"]="translate("+this._xoffset+"px,"+this._yoffset+"px)"}.bind(this),10)}this.wrapper.style.display="block",this.unknown&&this.resize(),this.onShow()}.bind(this),100)},hide:function(){this.noOverlayOrBlock||this._bgLock&&null!=this._bodyScrollTop&&(document.body.style.position=this._bodyPositionInStyle,document.body.style.width=this._bodyWidth,document.body.style.top=this._bodyTopInStyle,document.body.style.left=this._bodyLeftInStyle,window.scrollTo(this._bodyScrollLeft,this._bodyScrollTop),document.body.style.overflow=this._bodyOverflowInStyle,this._bgLock=!1),this.wrapper.style.display="none"},remove:function(){window.removeEventListener("resize",this.constructor.ResizeHandlers[this.id]),delete this.constructor.ResizeHandlers[this.id],this.hide(),this.wrapper.parentNode.removeChild(this.wrapper),this.main=null,this.wrapper=null,delete this.constructor.Table[this.timestamp]},close:function(){this.stay?this.hide():this.remove()}},i.ResizeHandlers={},i.Table={},i.Create=function(t){return new this(t)},i.Alert=function(t,i){var e=new this({content:'<div class="dialog-alert-wrapper"><div class="content">'+t+"</div>"+((i=i||{}).time?"":'<div class="btn-close btn">'+(i.btnText?i.btnText:"确定")+"</div>")+"</div>",noMask:!(i.callback||i.btnText),block:!i.noBlock,close:i.callback,autoShow:!0,unknown:!0});i.time&&window.setTimeout(function(){this.close()}.bind(e),1e3*i.time)},i.Confirm=function(t,i,e,o){new this({content:'<div class="dialog-confirm-wrapper"><div class="content">'+t+'</div><div class="footer"><div callback="sure" class="btn-close btn btn-sure">'+((o=o||{}).sureText?o.sureText:"确定")+'</div><div callback="cancel" class="btn-close btn btn-cancel">'+(o.cancelText?o.cancelText:"取消")+"</div></div></div>",block:1,callbacks:{sure:i,cancel:e},autoShow:!0,unknown:!0})},i});
