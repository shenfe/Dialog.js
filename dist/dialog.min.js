!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dialog=e()}(this,function(){"use strict";function t(t,e,i){return document.getElementsByClassName?_getElementsByClassName=function(t,e,i){for(var o,n=(i=i||document).getElementsByClassName(t),a=e?new RegExp("\\b"+e+"\\b","i"):null,s=[],r=0,l=n.length;r<l;r+=1)o=n[r],a&&!a.test(o.nodeName)||s.push(o);return s}:document.evaluate?_getElementsByClassName=function(t,e,i){e=e||"*",i=i||document;for(var o,n,a=t.split(" "),s="",r="http://www.w3.org/1999/xhtml"===document.documentElement.namespaceURI?"http://www.w3.org/1999/xhtml":null,l=[],d=0,m=a.length;d<m;d+=1)s+="[contains(concat(' ', @class, ' '), ' "+a[d]+" ')]";try{o=document.evaluate(".//"+e+s,i,r,0,null)}catch(h){o=document.evaluate(".//"+e+s,i,null,0,null)}for(;n=o.iterateNext();)l.push(n);return l}:_getElementsByClassName=function(t,e,i){e=e||"*",i=i||document;for(var o,n,a=t.split(" "),s=[],r="*"===e&&i.all?i.all:i.getElementsByTagName(e),l=[],d=0,m=a.length;d<m;d+=1)s.push(new RegExp("(^|\\s)"+a[d]+"(\\s|$)"));for(var h=0,p=r.length;h<p;h+=1){o=r[h],n=!1;for(var c=0,f=s.length;c<f&&(n=s[c].test(o.className));c+=1);n&&l.push(o)}return l},_getElementsByClassName(t,e,i)}function e(t,e,i){for(var o=i||document,n=e.split("-"),a=1,s=n.length;a<s;a++)n[a].length&&(n[a]=n[a].charAt(0).toUpperCase()+n[a].substr(1));if(e=n.join(""),t.style[e])return t.style[e];if(t.currentStyle)return t.currentStyle[e];if(o.defaultView&&o.defaultView.getComputedStyle){e=(e=e.replace(/([A-Z])/g,"-$1")).toLowerCase();var r=o.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(e)}return null}function i(){var t=navigator.userAgent;if(!(!!window.ActiveXObject||"ActiveXObject"in window||t.indexOf("compatible")>=0&&t.indexOf("MSIE")>-1&&t.indexOf("Opera")<0))return-1;return new RegExp("MSIE (\\d+\\.\\d+);").test(t),Math.floor(parseFloat(RegExp.$1))}function o(t,e,i){i.$$guid||(i.$$guid=o.guid++),t.events||(t.events={});var a=t.events[e];a||(a=t.events[e]={},t["on"+e]&&(a[0]=t["on"+e])),a[i.$$guid]=i,t["on"+e]=n}function n(t){var e=!0;t=t||a(window.event);var i=this.events[t.type];for(var o in i)this.$$handleEvent=i[o],!1===this.$$handleEvent(t)&&(e=!1);return e}function a(t){return t.preventDefault=a.preventDefault,t.stopPropagation=a.stopPropagation,t}!function(t,e){if("undefined"==typeof document)return e;t=t||"";var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}('.dialog-wrapper{z-index:1!important;position:fixed;top:0;left:0;width:100%;height:100%;padding:0;margin:0;border:0;text-align:center;background:none\\9;*background:none;_background:none;background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\\9;*background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);_background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);background-color:#000 transparent;background-color:rgba(0,0,0,.4);zoom:1;filter:progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7F000000,endcolorstr=#7F000000);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7F000000,endcolorstr=#7F000000)";overflow:hidden}.dialog-wrapper-noOverlay{background-color:transparent;filter:progid:DXImageTransform.Microsoft.gradient(startcolorstr=#00000000,endcolorstr=#00000000);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startcolorstr=#00000000,endcolorstr=#00000000)"}.dialog-wrapper,.dialog-wrapper *{padding:0;margin:0}.dialog-docker{position:absolute;visibility:hidden;zoom:1;overflow:visible}.dialog-docker-p0{top:0;left:0;width:100%;height:100%}.dialog-wrapper .dialog{color:#000;background-color:#fff;border:10px solid #eee;border-radius:2px}.dialog-wrapper .dialog,.dialog-wrapper .dialog-unknown{margin:0 auto;visibility:visible;zoom:1;padding:0;overflow:auto}.dialog-wrapper .dialog-unknown{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%)}.dialog-docker-p1{top:0;left:0}.dialog-docker-p2{top:0;left:50%}.dialog-docker-p3{top:0;right:0}.dialog-docker-p4{top:50%;left:0}.dialog-docker-p5{top:50%;left:50%}.dialog-docker-p6{top:50%;right:0}.dialog-docker-p7{bottom:0;left:0}.dialog-docker-p8{bottom:0;left:50%}.dialog-docker-p9{bottom:0;right:0}.dialog-docker-p0 .dialog{margin:0;border:0}.dialog-docker-p1 .dialog{position:absolute;top:0;left:0}.dialog-docker-p2 .dialog{position:absolute;top:0;left:-50%}.dialog-docker-p3 .dialog{position:absolute;top:0;right:0}.dialog-docker-p4 .dialog{position:absolute;top:-50%;left:0}.dialog-docker-p5 .dialog{position:absolute;top:-50%;left:-50%}.dialog-docker-p6 .dialog{position:absolute;top:-50%;right:0}.dialog-docker-p7 .dialog{position:absolute;bottom:0;left:0}.dialog-docker-p8 .dialog{position:absolute;bottom:0;left:-50%}.dialog-docker-p9 .dialog{position:absolute;bottom:0;right:0}@keyframes a{0%{opacity:0}to{opacity:1}}@keyframes b{0%{transform:translateY(100px);-webkit-transform:translateY(100px);-moz-transform:translateY(100px);-ms-transform:translateY(100px);-o-transform:translateY(100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}@keyframes c{0%{transform:translateY(-100px);-webkit-transform:translateY(-100px);-moz-transform:translateY(-100px);-ms-transform:translateY(-100px);-o-transform:translateY(-100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}@keyframes d{0%{transform:translate(-100px);-webkit-transform:translate(-100px);-moz-transform:translate(-100px);-ms-transform:translate(-100px);-o-transform:translate(-100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}@keyframes e{0%{transform:translate(100px);-webkit-transform:translate(100px);-moz-transform:translate(100px);-ms-transform:translate(100px);-o-transform:translate(100px)}to{transform:translate(0);-webkit-transform:translate(0);-moz-transform:translate(0);-ms-transform:translate(0);-o-transform:translate(0)}}.dialog-wrapper .slide-down,.dialog-wrapper .slide-left,.dialog-wrapper .slide-right,.dialog-wrapper .slide-up{animation-duration:.15s;animation-timing-function:ease;animation-iteration-count:1;-webkit-animation-duration:.15s;-webkit-animation-timing-function:ease;-webkit-animation-iteration-count:1;-moz-animation-duration:.15s;-moz-animation-timing-function:ease;-moz-animation-iteration-count:1;-ms-animation-duration:.15s;-ms-animation-timing-function:ease;-ms-animation-iteration-count:1;-o-animation-duration:.15s;-o-animation-timing-function:ease;-o-animation-iteration-count:1}.dialog-wrapper .slide-up{animation-name:b;-webkit-animation-name:b;-moz-animation-name:b;-ms-animation-name:b;-o-animation-name:b}.dialog-wrapper .slide-down{animation-name:c;-webkit-animation-name:c;-moz-animation-name:c;-ms-animation-name:c;-o-animation-name:c}.dialog-wrapper .slide-right{animation-name:d;-webkit-animation-name:d;-moz-animation-name:d;-ms-animation-name:d;-o-animation-name:d}.dialog-wrapper .slide-left{animation-name:e;-webkit-animation-name:e;-moz-animation-name:e;-ms-animation-name:e;-o-animation-name:e}.dialog-wrapper-fadein{animation-name:a;animation-duration:.2s;animation-timing-function:linear;animation-iteration-count:1;-webkit-animation-name:a;-webkit-animation-duration:.2s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:1;-moz-animation-name:a;-moz-animation-duration:.2s;-moz-animation-timing-function:linear;-moz-animation-iteration-count:1;-ms-animation-name:a;-ms-animation-duration:.2s;-ms-animation-timing-function:linear;-ms-animation-iteration-count:1;-o-animation-name:a;-o-animation-duration:.2s;-o-animation-timing-function:linear;-o-animation-iteration-count:1}',undefined),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,o=function(){},n=function(){return i.apply(this instanceof o&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,n.prototype=new o,n}),window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var i=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),i.test(e)&&(e=e.replace(i,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this});var s=function(t){this.constructor=s,this.timestamp=Date.now().toString(),this.id="Dialog_"+this.timestamp,this.content=t.content||"",this.onClose=t.close||function(){},this.onShow=t.show||function(){},this.onReady=t.ready||function(){},this.callbacks=t.callbacks||{},this.stay=!!t.stay,this.unknown=!!t.unknown,this.width=t.width||"100%",this.height=t.height||"auto",this.position=t.position||5,this.block=!!t.block,this.noOverlay=!!t.noMask,this.fullscreen=!!t.fullscreen,this.fullscreen&&(this.unknown=!1),this.zIndex=t.zIndex||1,this.top=t.top||0,this.right=t.right||0,this.bottom=t.bottom||0,this.left=t.left||0,this.withBorder=!!t.withBorder,this.parentEl=t.container||document.body,this.slide=t.slide,this.slideConf=t.slideConf||"200ms ease",this.fade=t.fade,this.opacity=t.opacity||"0.4";var e=parseFloat(this.opacity);(isNaN(e)||e<0||e>1)&&(this.opacity="0.4"),this._bgLock=!1,this.noOverlayOrBlock=this.noOverlay&&!this.block,this.wrapper=null,this.main=null,this.init(),t.autoShow&&this.show()};return s.prototype={_setLayout:function(t){if(!t)t=this.main;if(this.fullscreen&&(this.width="100%",this.height="100%",this.position=0),this.position>=0&&this.position<=9){t.style.width=this.width,t.style.height=this.height,t.parentNode.className=t.parentNode.className+" dialog-docker-p"+this.position,t.parentNode.style.width=this.width,t.parentNode.style.height=this.height,t.style.width="100%","auto"!=this.height&&(t.style.height="100%"),5==this.position&&"string"==typeof this.top&&"%"==this.top.charAt(this.top.length-1)&&(t.parentNode.style.top=this.top);this._setOffset(t,[[],["top","left"],["top","left"],["top","right"],["top","left"],["top","left"],["top","right"],["bottom","left"],["bottom","left"],["bottom","right"]][this.position])}},_setOffset:function(t,o){if(!t)t=this.main;if(!o)o=["top","right","bottom","left"];var n=[0,0];if(this.top&&"number"==typeof this.top&&(n[1]+=this.top),this.right&&"number"==typeof this.right&&(n[0]-=this.right),this.bottom&&"number"==typeof this.bottom&&(n[1]-=this.bottom),this.left&&"number"==typeof this.left&&(n[0]+=this.left),!this.withBorder)for(var a=0;a<o.length;a++){var s=o[a];(function(i){if("auto"!=e(t,i)){var o=e(t,"border-"+i+"-width");(o=o.split(" ")[0]).lastIndexOf("px")==o.length-2&&(o=parseFloat(o.substring(0,o.length-2)),"top"==i?n[1]-=o:"right"==i?n[0]+=o:"bottom"==i?n[1]+=o:"left"==i&&(n[0]-=o))}}).bind(this)(s)}var r="translate("+n[0]+"px,"+n[1]+"px)";t.style.transform=r,t.style.WebkitTransform=r,t.style.MozTransform=r,t.style.OTransform=r,t.style.msTransform=r,this._xoffset=n[0],this._yoffset=n[1],this._contentWidth=t.clientWidth,this._contentHeight=t.clientHeight;var l=i();if(l>0&&l<=8){var d;d=l<8?";filter: progid:DXImageTransform.Microsoft.Matrix(M11=1,M12=0,M21=0,M22=1,SizingMethod='auto expand')":";-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=0, M21=0, M22=1, SizingMethod='auto expand')\"",t.style.cssText=t.style.cssText+d,"auto"!=e(t,"top")?t.style.marginTop=n[1]+"px":t.style.bottom=-n[1]+"px","auto"!=e(t,"left")?t.style.marginLeft=n[0]+"px":t.style.right=-n[0]+"px"}},init:function(){var t=this.render(this.content,this.style,this.id);t.onclick=function(t){var e=(t=t||window.event).srcElement||t.target;if(e.className.indexOf("dialog-wrapper")>=0||e.className.indexOf("dialog-docker")>=0)this.block||(this.close(),this.onClose());else if(e.className.indexOf("btn-close")>=0){var i=e.getAttribute("callback");this.callbacks&&i&&this.callbacks[i]&&this.callbacks[i](),this.close(),this.onClose()}t.preventDefault?t.preventDefault():t.returnValue=!1}.bind(this),this.onReady(t),this.constructor.ResizeHandlers[this.id]=this.resize.bind(this),o(window,"resize",this.constructor.ResizeHandlers[this.id]),this.constructor.Table[this.timestamp]=this},render:function(e,o,n){if(this.noOverlayOrBlock||function(t){if(t.parentEl&&!t._frameId){t._frameId="DialogFrame_"+(t.timestamp?t.timestamp:Date.now().toString());var e=document.createElement("iframe");e.id=t._frameId,e.setAttribute("frameBorder","0"),e.setAttribute("scrolling","no"),e.setAttribute("width","100%"),e.setAttribute("allowTransparency","true"),e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zoom="1",e.style.zIndex="2147483647",e.style.minHeight="0",e.style.background="none",e.style.display="none",t.parentEl.appendChild(e)}}(this),!n)n=this.id;if(!this.main||!this.wrapper){this.main&&this.main.parentNode.removeChild(this.main),this.wrapper&&this.wrapper.parentNode.removeChild(this.wrapper),this.main=null,this.wrapper=null;var a=document.createElement("div");this.unknown?a.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-unknown">{content}</div></div>':a.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-docker"><div class="dialog">{content}</div></div></div>',this.wrapper=t("dialog-wrapper",null,a)[0],i()<0&&!this.noOverlay&&(this.wrapper.style.backgroundColor="rgba(0,0,0,"+this.opacity+")"),this.wrapper.id=n,this.wrapper.style.visibility="hidden",this.wrapper.style.zIndex=this.zIndex,this.noOverlay&&(this.wrapper.className+=" "+this.wrapper.className+"-noOverlay"),this.main=t(this.unknown?"dialog-unknown":"dialog",null,this.wrapper)[0],this.parentEl.appendChild(this.wrapper)}return"string"==typeof e?this.main.innerHTML=e:e instanceof Node&&(this.main.innerHTML="",this.main.appendChild(e)),this.unknown?this.resize():this._setLayout(),this.hide(),this.wrapper.style.visibility="visible",this.wrapper},resize:function(t){this.unknown&&(this.main.scrollHeight<=this.wrapper.clientHeight?this.main.style.maxHeight="":(this.main.style.maxHeight=this.wrapper.clientHeight+"px",this.main.style.overflow="auto"))},show:function(){setTimeout(function(){if(!this.noOverlayOrBlock){if(!this._bgLock){this._bgLock=!0,this._bodyPosition=e(document.body,"position"),this._bodyPositionInStyle=document.body.style.position,this._bodyTop=e(document.body,"top"),this._bodyTopInStyle=document.body.style.top,this._bodyLeft=e(document.body,"left"),this._bodyLeftInStyle=document.body.style.left,this._bodyWidth=document.body.style.width,this._bodyClientWidth=document.body.clientWidth;var t=window.pageXOffset!==undefined?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,o=window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._bodyScrollTop=o,this._bodyScrollLeft=t,this._bodyOverflow=e(document.body,"overflow"),this._bodyOverflowInStyle=document.body.style.overflow;var n=(s=i())>0&&s<=7?document.documentElement:document.body;n.style.position="fixed",n.style.width=this._bodyClientWidth+"px",n.style.top=0-this._bodyScrollTop+"px",n.style.left=0-this._bodyScrollLeft+"px",n.style.overflow="hidden"}var a=document.getElementById(this._frameId);a&&(a.style.display="block")}if(this.slide||this.fade){this.fade&&this.wrapper.className.indexOf("dialog-wrapper-fadein")<0&&(this.wrapper.className+=" dialog-wrapper-fadein");var s=i();if(this.slide&&this.main.className.indexOf("slide-"+this.slide)<0){var r=0,l=0;switch(this.slide){case"up":r=this._xoffset,l=this._yoffset+this._contentHeight;break;case"down":r=this._xoffset,l=this._yoffset-this._contentHeight;break;case"right":r=this._xoffset-this._contentWidth,l=this._yoffset;break;case"left":r=this._xoffset+this._contentWidth,l=this._yoffset}for(var d=["","-webkit-","-moz-","-ms-","-o-"],m=0,h=d.length;m<h;m++)this.main.style[d[m]+"transform"]="translate("+r+"px,"+l+"px)",this.main.style[d[m]+"transition"]="transform "+this.slideConf;window.setTimeout(function(){for(var t=0,e=d.length;t<e;t++)this.main.style[d[t]+"transform"]="translate("+this._xoffset+"px,"+this._yoffset+"px)"}.bind(this),10)}}this.wrapper.style.display="block",this.unknown&&this.resize(),this.onShow()}.bind(this),100)},hide:function(){if(!this.noOverlayOrBlock){if(this._bgLock&&null!=this._bodyScrollTop){var t=i(),e=t>0&&t<=7?document.documentElement:document.body;e.style.position=this._bodyPositionInStyle,e.style.width=this._bodyWidth,e.style.top=this._bodyTopInStyle,e.style.left=this._bodyLeftInStyle,window.scrollTo(this._bodyScrollLeft,this._bodyScrollTop),e.style.overflow=this._bodyOverflowInStyle,this._bgLock=!1}var o=document.getElementById(this._frameId);o&&(o.style.display="none")}this.wrapper.style.display="none"},remove:function(){!function(t,e,i){t.events&&t.events[e]&&delete t.events[e][i.$$guid]}(window,"resize",this.constructor.ResizeHandlers[this.id]),delete this.constructor.ResizeHandlers[this.id],this.hide(),this.wrapper.parentNode.removeChild(this.wrapper),this.noOverlayOrBlock||this.parentEl.removeChild(document.getElementById(this._frameId)),this.main=null,this.wrapper=null,delete this.constructor.Table[this.timestamp]},close:function(){this.stay?this.hide():this.remove()}},s.ResizeHandlers={},s.Table={},s.Create=function(t){return new this(t)},s.Alert=function(t,e){var i=new this({content:'<div class="dialog-alert-wrapper"><div class="content">'+t+"</div>"+((e=e||{}).time?"":'<div class="btn-close btn">'+(e.btnText?e.btnText:"确定")+"</div>")+"</div>",noMask:!(e.callback||e.btnText),block:!e.noBlock,close:e.callback,autoShow:!0,unknown:!0});e.time&&window.setTimeout(function(){this.close()}.bind(i),1e3*e.time)},s.Confirm=function(t,e,i,o){new this({content:'<div class="dialog-confirm-wrapper"><div class="content">'+t+'</div><div class="footer"><div callback="sure" class="btn-close btn btn-sure">'+((o=o||{}).sureText?o.sureText:"确定")+'</div><div callback="cancel" class="btn-close btn btn-cancel">'+(o.cancelText?o.cancelText:"取消")+"</div></div></div>",block:1,callbacks:{sure:e,cancel:i},autoShow:!0,unknown:!0})},o.guid=1,a.preventDefault=function(){this.returnValue=!1},a.stopPropagation=function(){this.cancelBubble=!0},s});
