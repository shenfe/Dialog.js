(function(){(function(){if(!Function.prototype.bind){Function.prototype.bind=function(j){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var n=Array.prototype.slice.call(arguments,1),m=this,k=function(){},l=function(){return m.apply(this instanceof k&&j?this:j,n.concat(Array.prototype.slice.call(arguments)))};k.prototype=this.prototype;l.prototype=new k();return l}}})();(function(){if(!window.getComputedStyle){window.getComputedStyle=function(j,k){this.el=j;this.getPropertyValue=function(m){var l=/(\-([a-z]){1})/g;if(m=="float"){m="styleFloat"}if(l.test(m)){m=m.replace(l,function(){return arguments[2].toUpperCase()})}return j.currentStyle[m]?j.currentStyle[m]:null};return this}}})();var g=function(j){this.constructor=g;this.timestamp=(Date.now()).toString();this.id="Dialog_"+this.timestamp;this.content=j.content||"";this.onClose=j.close||function(){};this.onShow=j.show||function(){};this.onReady=j.ready||function(){};this.callbacks=j.callbacks||{};this.stay=!!j.stay;this.unknown=!!j.unknown;this.width=j.width||"100%";this.height=j.height||"auto";this.position=j.position||5;this.block=!!j.block;this.noOverlay=!!j.noMask;this.fullscreen=!!j.fullscreen;if(this.fullscreen){this.unknown=false}this.zIndex=j.zIndex||1;this.top=j.top||0;this.right=j.right||0;this.bottom=j.bottom||0;this.left=j.left||0;this.withBorder=!!j.withBorder;this.parentEl=j.container||document.body;this.slide=j.slide;this.slideConf=j.slideConf||"200ms ease";this.fade=j.fade;this.opacity=j.opacity||"0.4";var k=parseFloat(this.opacity);if(isNaN(k)||k<0||k>1){this.opacity="0.4"}this._bgLock=false;this.noOverlayOrBlock=this.noOverlay&&!this.block;this.wrapper=null;this.main=null;this.init();if(!!j.autoShow){this.show()}};g.prototype={_setLayout:function(k){if(!k){var k=this.main}if(this.fullscreen){this.width="100%";this.height="100%";this.position=0}if(this.position>=0&&this.position<=9){k.style.width=this.width;k.style.height=this.height;k.parentNode.className=k.parentNode.className+" dialog-docker-p"+this.position;k.parentNode.style.width=this.width;k.parentNode.style.height=this.height;k.style.width="100%";if(this.height!="auto"){k.style.height="100%"}if(this.position==5){if("string"==typeof this.top&&this.top.charAt(this.top.length-1)=="%"){k.parentNode.style.top=this.top}}var j=[[],["top","left"],["top","left"],["top","right"],["top","left"],["top","left"],["top","right"],["bottom","left"],["bottom","left"],["bottom","right"]];this._setOffset(k,j[this.position])}},_setOffset:function(l,o){if(!l){var l=this.main}if(!o){var o=["top","right","bottom","left"]}var q=[0,0];if(this.top&&"number"==typeof this.top){q[1]+=this.top}if(this.right&&"number"==typeof this.right){q[0]-=this.right}if(this.bottom&&"number"==typeof this.bottom){q[1]-=this.bottom}if(this.left&&"number"==typeof this.left){q[0]+=this.left}if(!this.withBorder){for(var k=0;k<o.length;k++){var m=o[k];(function(t){var s=e(l,t);if(s=="auto"){return}var r=e(l,"border-"+t+"-width");r=r.split(" ")[0];if(r.lastIndexOf("px")!=r.length-2){return}r=parseFloat(r.substring(0,r.length-2));if(t=="top"){q[1]-=r}else{if(t=="right"){q[0]+=r}else{if(t=="bottom"){q[1]+=r}else{if(t=="left"){q[0]-=r}}}}}.bind(this))(m)}}var n="translate("+q[0]+"px,"+q[1]+"px)";l.style.transform=n;l.style.WebkitTransform=n;l.style.MozTransform=n;l.style.OTransform=n;l.style.msTransform=n;this._xoffset=q[0];this._yoffset=q[1];this._contentWidth=l.clientWidth;this._contentHeight=l.clientHeight;var j=f();if(j>0&&j<=8){var p;if(j<8){p=";filter: progid:DXImageTransform.Microsoft.Matrix(M11=1,M12=0,M21=0,M22=1,SizingMethod='auto expand')"}else{p=";-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=0, M21=0, M22=1, SizingMethod='auto expand')\""}l.style.cssText=l.style.cssText+p;if(e(l,"top")!="auto"){l.style.marginTop=q[1]+"px"}else{l.style.bottom=-q[1]+"px"}if(e(l,"left")!="auto"){l.style.marginLeft=q[0]+"px"}else{l.style.right=-q[0]+"px"}}},init:function(){var j=this.render(this.content,this.style,this.id);j.onclick=(function(k){k=k||window.event;var m=k.srcElement||k.target;if(m.className.indexOf("dialog-wrapper")>=0||m.className.indexOf("dialog-docker")>=0){if(!this.block){this.close();this.onClose()}}else{if(m.className.indexOf("btn-close")>=0){var l=m.getAttribute("callback");if(this.callbacks&&l&&this.callbacks[l]){this.callbacks[l]()}this.close();this.onClose()}}k.preventDefault?k.preventDefault():(k.returnValue=false)}).bind(this);this.onReady(j);this.constructor.ResizeHandlers[this.id]=this.resize.bind(this);c(window,"resize",this.constructor.ResizeHandlers[this.id]);this.constructor.Table[this.timestamp]=this},render:function(l,k,m){if(!this.noOverlayOrBlock){(function(n){if(!(n.parentEl)||n._frameId){return}n._frameId="DialogFrame_"+(n.timestamp?n.timestamp:(Date.now()).toString());var o=document.createElement("iframe");o.id=n._frameId;o.setAttribute("frameBorder","0");o.setAttribute("scrolling","no");o.setAttribute("width","100%");o.setAttribute("allowTransparency","true");o.style.position="fixed";o.style.top="0";o.style.left="0";o.style.width="100%";o.style.height="100%";o.style.zoom="1";o.style.zIndex="2147483647";o.style.minHeight="0";o.style.background="none";o.style.display="none";(n.parentEl).appendChild(o)})(this)}if(!m){var m=this.id}if(!this.main||!this.wrapper){if(this.main){this.main.parentNode.removeChild(this.main)}if(this.wrapper){this.wrapper.parentNode.removeChild(this.wrapper)}this.main=null;this.wrapper=null;var j=document.createElement("div");if(this.unknown){j.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-unknown">{content}</div></div>'}else{j.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-docker"><div class="dialog">{content}</div></div></div>'}this.wrapper=h("dialog-wrapper",null,j)[0];if(f()<0&&!this.noOverlay){this.wrapper.style.backgroundColor="rgba(0,0,0,"+this.opacity+")"}this.wrapper.id=m;this.wrapper.style.visibility="hidden";this.wrapper.style.zIndex=this.zIndex;if(this.noOverlay){this.wrapper.className+=" "+this.wrapper.className+"-noOverlay"}this.main=h(this.unknown?"dialog-unknown":"dialog",null,this.wrapper)[0];this.parentEl.appendChild(this.wrapper)}if("string"==typeof l){this.main.innerHTML=l}else{if(l instanceof Node){this.main.innerHTML="";this.main.appendChild(l)}}if(!this.unknown){this._setLayout()}else{this.resize()}this.hide();this.wrapper.style.visibility="visible";return this.wrapper},resize:function(j){if(!this.unknown){return}if(this.main.scrollHeight<=this.wrapper.clientHeight){this.main.style.maxHeight="";return}this.main.style.maxHeight=this.wrapper.clientHeight+"px";this.main.style.overflow="auto"},show:function(){setTimeout(function(){if(!this.noOverlayOrBlock){if(!this._bgLock){this._bgLock=true;this._bodyPosition=e(document.body,"position");this._bodyPositionInStyle=document.body.style.position;this._bodyTop=e(document.body,"top");this._bodyTopInStyle=document.body.style.top;this._bodyLeft=e(document.body,"left");this._bodyLeftInStyle=document.body.style.left;this._bodyWidth=document.body.style.width;this._bodyClientWidth=document.body.clientWidth;var n=(window.pageXOffset!==undefined)?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;var k=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._bodyScrollTop=k;this._bodyScrollLeft=n;this._bodyOverflow=e(document.body,"overflow");this._bodyOverflowInStyle=document.body.style.overflow;var j=f();var m=(j>0&&j<=7)?document.documentElement:document.body;m.style.position="fixed";m.style.width=this._bodyClientWidth+"px";m.style.top=(0-this._bodyScrollTop)+"px";m.style.left=(0-this._bodyScrollLeft)+"px";m.style.overflow="hidden"}var q=document.getElementById(this._frameId);if(q){q.style.display="block"}}if(this.slide||this.fade){if(this.fade&&this.wrapper.className.indexOf("dialog-wrapper-fadein")<0){this.wrapper.className+=" dialog-wrapper-fadein"}var j=f();if(this.slide&&this.main.className.indexOf("slide-"+this.slide)<0){var r=0,p=0;switch(this.slide){case"up":r=this._xoffset;p=this._yoffset+this._contentHeight;break;case"down":r=this._xoffset;p=this._yoffset-this._contentHeight;break;case"right":r=this._xoffset-this._contentWidth;p=this._yoffset;break;case"left":r=this._xoffset+this._contentWidth;p=this._yoffset;break;default:}var o=["","-webkit-","-moz-","-ms-","-o-"];for(var s=0,l=o.length;s<l;s++){this.main.style[o[s]+"transform"]="translate("+r+"px,"+p+"px)";this.main.style[o[s]+"transition"]="transform "+this.slideConf}window.setTimeout(function(){for(var t=0,u=o.length;t<u;t++){this.main.style[o[t]+"transform"]="translate("+this._xoffset+"px,"+this._yoffset+"px)"}}.bind(this),10)}}this.wrapper.style.display="block";if(this.unknown){this.resize()}this.onShow()}.bind(this),100)},hide:function(){if(!this.noOverlayOrBlock){if(this._bgLock&&this._bodyScrollTop!=null){var l=f();var k=(l>0&&l<=7)?document.documentElement:document.body;k.style.position=this._bodyPositionInStyle;k.style.width=this._bodyWidth;k.style.top=this._bodyTopInStyle;k.style.left=this._bodyLeftInStyle;window.scrollTo(this._bodyScrollLeft,this._bodyScrollTop);k.style.overflow=this._bodyOverflowInStyle;this._bgLock=false}var j=document.getElementById(this._frameId);if(j){j.style.display="none"}}this.wrapper.style.display="none"},remove:function(){b(window,"resize",this.constructor.ResizeHandlers[this.id]);delete this.constructor.ResizeHandlers[this.id];this.hide();this.wrapper.parentNode.removeChild(this.wrapper);if(!this.noOverlayOrBlock){this.parentEl.removeChild(document.getElementById(this._frameId))}this.main=null;this.wrapper=null;delete this.constructor.Table[this.timestamp]},close:function(){this.stay?this.hide():this.remove()}};g.ResizeHandlers={};g.Table={};g.Create=function(j){return new (this)(j)};g.Alert=function(l,k){var k=k||{};var j=new (this)({content:'<div class="dialog-alert-wrapper"><div class="content">'+l+"</div>"+(k.time?"":'<div class="btn-close btn">'+(k.btnText?k.btnText:"确定")+"</div>")+"</div>",noMask:!(k.callback||k.btnText),block:!(k.noBlock),close:k.callback,autoShow:true,unknown:true});if(k.time){window.setTimeout((function(){this.close()}).bind(j),k.time*1000)}};g.Confirm=function(m,l,k,j){var j=j||{};var n=new (this)({content:'<div class="dialog-confirm-wrapper"><div class="content">'+m+'</div><div class="footer"><div callback="sure" class="btn-close btn btn-sure">'+(j.sureText?j.sureText:"确定")+'</div><div callback="cancel" class="btn-close btn btn-cancel">'+(j.cancelText?j.cancelText:"取消")+"</div></div></div>",block:1,callbacks:{sure:l,cancel:k},autoShow:true,unknown:true})};function h(k,j,l){if(document.getElementsByClassName){_getElementsByClassName=function(r,u,q){q=q||document;var m=q.getElementsByClassName(r),t=(u)?new RegExp("\\b"+u+"\\b","i"):null,n=[],p;for(var o=0,s=m.length;o<s;o+=1){p=m[o];if(!t||t.test(p.nodeName)){n.push(p)}}return n}}else{if(document.evaluate){_getElementsByClassName=function(v,y,u){y=y||"*";u=u||document;var o=v.split(" "),w="",s="http://www.w3.org/1999/xhtml",x=(document.documentElement.namespaceURI===s)?s:null,p=[],m,n;for(var q=0,r=o.length;q<r;q+=1){w+="[contains(concat(' ', @class, ' '), ' "+o[q]+" ')]"}try{m=document.evaluate(".//"+y+w,u,x,0,null)}catch(t){m=document.evaluate(".//"+y+w,u,null,0,null)}while((n=m.iterateNext())){p.push(n)}return p}}else{_getElementsByClassName=function(y,B,x){B=B||"*";x=x||document;var r=y.split(" "),A=[],n=(B==="*"&&x.all)?x.all:x.getElementsByTagName(B),w,t=[],v;for(var s=0,o=r.length;s<o;s+=1){A.push(new RegExp("(^|\\s)"+r[s]+"(\\s|$)"))}for(var q=0,z=n.length;q<z;q+=1){w=n[q];v=false;for(var p=0,u=A.length;p<u;p+=1){v=A[p].test(w.className);if(!v){break}}if(v){t.push(w)}}return t}}}return _getElementsByClassName(k,j,l)}function e(p,m,q){var k=q||document,l=m.split("-");for(var n=1,j=l.length;n<j;n++){if(!l[n].length){continue}l[n]=l[n].charAt(0).toUpperCase()+l[n].substr(1)}m=l.join("");if(p.style[m]){return p.style[m]}else{if(p.currentStyle){return p.currentStyle[m]}else{if(k.defaultView&&k.defaultView.getComputedStyle){m=m.replace(/([A-Z])/g,"-$1");m=m.toLowerCase();var o=k.defaultView.getComputedStyle(p,"");return o&&o.getPropertyValue(m)}else{return null}}}}function f(){var k=navigator.userAgent;var l=(!!window.ActiveXObject||"ActiveXObject" in window)||(k.indexOf("compatible")>=0&&k.indexOf("MSIE")>-1&&k.indexOf("Opera")<0);if(!l){return -1}var j=new RegExp("MSIE (\\d+\\.\\d+);");j.test(k);return Math.floor(parseFloat(RegExp["$1"]))}function d(){var k=window,j="inner";if(!("innerWidth" in window)){j="client";k=document.documentElement||document.body}return{width:k[j+"Width"],height:k[j+"Height"]}}function c(k,m,l){if(!l.$$guid){l.$$guid=c.guid++}if(!k.events){k.events={}}var j=k.events[m];if(!j){j=k.events[m]={};if(k["on"+m]){j[0]=k["on"+m]}}j[l.$$guid]=l;k["on"+m]=a}c.guid=1;function b(j,l,k){if(j.events&&j.events[l]){delete j.events[l][k.$$guid]}}function a(m){var l=true;m=m||i(window.event);var j=this.events[m.type];for(var k in j){this.$$handleEvent=j[k];if(this.$$handleEvent(m)===false){l=false}}return l}function i(j){j.preventDefault=i.preventDefault;j.stopPropagation=i.stopPropagation;return j}i.preventDefault=function(){this.returnValue=false};i.stopPropagation=function(){this.cancelBubble=true};if(typeof module!=="undefined"&&module.exports){module.exports=g}else{window.Dialog=g}}());