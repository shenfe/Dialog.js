(function(){var c=function(g){this.constructor=c;this.timestamp=(Date.now()).toString();this.id="Dialog_"+this.timestamp;this.content=g.content||"";this.onClose=g.close||function(){};this.onShow=g.show||function(){};this.onReady=g.ready||function(){};this.callbacks=g.callbacks||{};this.stay=!!g.stay;this.unknown=!!g.unknown;this.width=g.width||"100%";this.height=g.height||"auto";this.position=g.position||5;this.block=!!g.block;this.noOverlay=!!g.noMask;this.fullscreen=!!g.fullscreen;if(this.fullscreen){this.unknown=false}this.zIndex=g.zIndex||1;this.top=g.top||0;this.right=g.right||0;this.bottom=g.bottom||0;this.left=g.left||0;this.withBorder=!!g.withBorder;this.parentEl=g.container||document.body;this.slide=g.slide;this.slideConf=g.slideConf||"200ms ease";this.fade=g.fade;this.opacity=g.opacity||"0.4";var h=parseFloat(this.opacity);if(isNaN(h)||h<0||h>1){this.opacity="0.4"}this._bgLock=false;this.noOverlayOrBlock=this.noOverlay&&!this.block;this.wrapper=null;this.main=null;this.init();if(!!g.autoShow){this.show()}};c.prototype={_setLayout:function(h){if(!h){var h=this.main}if(this.fullscreen){this.width="100%";this.height="100%";this.position=0}if(this.position>=0&&this.position<=9){h.style.width=this.width;h.style.height=this.height;h.parentNode.className=h.parentNode.className+" dialog-docker-p"+this.position;h.parentNode.style.width=this.width;h.parentNode.style.height=this.height;h.style.width="100%";if(this.height!="auto"){h.style.height="100%"}if(this.position==5){if("string"==typeof this.top&&this.top.charAt(this.top.length-1)=="%"){h.parentNode.style.top=this.top}}var g=[[],["top","left"],["top","left"],["top","right"],["top","left"],["top","left"],["top","right"],["bottom","left"],["bottom","left"],["bottom","right"]];this._setOffset(h,g[this.position])}},_setOffset:function(h,l){if(!h){var h=this.main}if(!l){var l=["top","right","bottom","left"]}var m=[0,0];if(this.top&&"number"==typeof this.top){m[1]+=this.top}if(this.right&&"number"==typeof this.right){m[0]-=this.right}if(this.bottom&&"number"==typeof this.bottom){m[1]-=this.bottom}if(this.left&&"number"==typeof this.left){m[0]+=this.left}if(!this.withBorder){for(var g=0;g<l.length;g++){var j=l[g];(function(o){var n=b(h,o);if(n=="auto"){return}var i=b(h,"border-"+o+"-width");i=i.split(" ")[0];if(i.lastIndexOf("px")!=i.length-2){return}i=parseFloat(i.substring(0,i.length-2));if(o=="top"){m[1]-=i}else{if(o=="right"){m[0]+=i}else{if(o=="bottom"){m[1]+=i}else{if(o=="left"){m[0]-=i}}}}}.bind(this))(j)}}var k="translate("+m[0]+"px,"+m[1]+"px)";h.style.transform=k;h.style.WebkitTransform=k;h.style.MozTransform=k;h.style.OTransform=k;h.style.msTransform=k;this._xoffset=m[0];this._yoffset=m[1];this._contentWidth=h.clientWidth;this._contentHeight=h.clientHeight},init:function(){var g=this.render(this.content,this.style,this.id);g.onclick=(function(h){h=h||window.event;var j=h.srcElement||h.target;if(j.className.indexOf("dialog-wrapper")>=0||j.className.indexOf("dialog-docker")>=0){if(!this.block){this.close();this.onClose()}}else{if(j.className.indexOf("btn-close")>=0){var i=j.getAttribute("callback");if(this.callbacks&&i&&this.callbacks[i]){this.callbacks[i]()}this.close();this.onClose()}}h.preventDefault?h.preventDefault():(h.returnValue=false)}).bind(this);this.onReady(g);this.constructor.ResizeHandlers[this.id]=this.resize.bind(this);e(window,"resize",this.constructor.ResizeHandlers[this.id]);this.constructor.Table[this.timestamp]=this},render:function(i,h,j){if(!j){var j=this.id}if(!this.main||!this.wrapper){if(this.main){this.main.parentNode.removeChild(this.main)}if(this.wrapper){this.wrapper.parentNode.removeChild(this.wrapper)}this.main=null;this.wrapper=null;var g=document.createElement("div");if(this.unknown){g.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-unknown">{content}</div></div>'}else{g.innerHTML='<div id="{id}" class="dialog-wrapper"><div class="dialog-docker"><div class="dialog">{content}</div></div></div>'}this.wrapper=g.getElementsByClassName("dialog-wrapper")[0];if(!this.noOverlay){this.wrapper.style.backgroundColor="rgba(0,0,0,"+this.opacity+")"}this.wrapper.id=j;this.wrapper.style.visibility="hidden";this.wrapper.style.zIndex=this.zIndex;if(this.noOverlay){this.wrapper.className+=" "+this.wrapper.className+"-noOverlay"}this.main=this.wrapper.getElementsByClassName(this.unknown?"dialog-unknown":"dialog")[0];this.parentEl.appendChild(this.wrapper)}if("string"==typeof i){this.main.innerHTML=i}else{if(i instanceof Node){this.main.innerHTML="";this.main.appendChild(i)}}if(!this.unknown){this._setLayout()}else{this.resize()}this.hide();this.wrapper.style.visibility="visible";return this.wrapper},resize:function(g){if(!this.unknown){return}if(this.main.scrollHeight<=this.wrapper.clientHeight){this.main.style.maxHeight="";return}this.main.style.maxHeight=this.wrapper.clientHeight+"px";this.main.style.overflow="auto"},show:function(){setTimeout(function(){if(!this.noOverlayOrBlock){if(!this._bgLock){this._bgLock=true;this._bodyPosition=b(document.body,"position");this._bodyPositionInStyle=document.body.style.position;this._bodyTop=b(document.body,"top");this._bodyTopInStyle=document.body.style.top;this._bodyLeft=b(document.body,"left");this._bodyLeftInStyle=document.body.style.left;this._bodyWidth=document.body.style.width;this._bodyClientWidth=document.body.clientWidth;var g=(window.pageXOffset!==undefined)?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;var m=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._bodyScrollTop=m;this._bodyScrollLeft=g;this._bodyOverflow=b(document.body,"overflow");this._bodyOverflowInStyle=document.body.style.overflow;document.body.style.position="fixed";document.body.style.width=this._bodyClientWidth+"px";document.body.style.top=(0-this._bodyScrollTop)+"px";document.body.style.left=(0-this._bodyScrollLeft)+"px";document.body.style.overflow="hidden"}}if(this.slide||this.fade){if(this.fade&&this.wrapper.className.indexOf("dialog-wrapper-fadein")<0){this.wrapper.className+=" dialog-wrapper-fadein"}if(this.slide&&this.main.className.indexOf("slide-"+this.slide)<0){var h=0,k=0;switch(this.slide){case"up":h=this._xoffset;k=this._yoffset+this._contentHeight;break;case"down":h=this._xoffset;k=this._yoffset-this._contentHeight;break;case"right":h=this._xoffset-this._contentWidth;k=this._yoffset;break;case"left":h=this._xoffset+this._contentWidth;k=this._yoffset;break;default:}var l=["","-webkit-","-moz-","-ms-","-o-"];for(var i=0,j=l.length;i<j;i++){this.main.style[l[i]+"transform"]="translate("+h+"px,"+k+"px)";this.main.style[l[i]+"transition"]="transform "+this.slideConf}window.setTimeout(function(){for(var n=0,o=l.length;n<o;n++){this.main.style[l[n]+"transform"]="translate("+this._xoffset+"px,"+this._yoffset+"px)"}}.bind(this),10)}}this.wrapper.style.display="block";if(this.unknown){this.resize()}this.onShow()}.bind(this),100)},hide:function(){if(!this.noOverlayOrBlock){if(this._bgLock&&this._bodyScrollTop!=null){document.body.style.position=this._bodyPositionInStyle;document.body.style.width=this._bodyWidth;document.body.style.top=this._bodyTopInStyle;document.body.style.left=this._bodyLeftInStyle;window.scrollTo(this._bodyScrollLeft,this._bodyScrollTop);document.body.style.overflow=this._bodyOverflowInStyle;this._bgLock=false}}this.wrapper.style.display="none"},remove:function(){a(window,"resize",this.constructor.ResizeHandlers[this.id]);delete this.constructor.ResizeHandlers[this.id];this.hide();this.wrapper.parentNode.removeChild(this.wrapper);this.main=null;this.wrapper=null;delete this.constructor.Table[this.timestamp]},close:function(){this.stay?this.hide():this.remove()}};c.ResizeHandlers={};c.Table={};c.Create=function(g){return new (this)(g)};c.Alert=function(i,h){var h=h||{};var g=new (this)({content:'<div class="dialog-alert-wrapper"><div class="content">'+i+"</div>"+(h.time?"":'<div class="btn-close btn">'+(h.btnText?h.btnText:"确定")+"</div>")+"</div>",noMask:!(h.callback||h.btnText),block:!(h.noBlock),close:h.callback,autoShow:true,unknown:true});if(h.time){window.setTimeout((function(){this.close()}).bind(g),h.time*1000)}};c.Confirm=function(j,i,h,g){var g=g||{};var k=new (this)({content:'<div class="dialog-confirm-wrapper"><div class="content">'+j+'</div><div class="footer"><div callback="sure" class="btn-close btn btn-sure">'+(g.sureText?g.sureText:"确定")+'</div><div callback="cancel" class="btn-close btn btn-cancel">'+(g.cancelText?g.cancelText:"取消")+"</div></div></div>",block:1,callbacks:{sure:i,cancel:h},autoShow:true,unknown:true})};function b(n,k,o){var h=o||document,j=k.split("-");for(var l=1,g=j.length;l<g;l++){if(!j[l].length){continue}j[l]=j[l].charAt(0).toUpperCase()+j[l].substr(1)}k=j.join("");if(n.style[k]){return n.style[k]}else{if(n.currentStyle){return n.currentStyle[k]}else{if(h.defaultView&&h.defaultView.getComputedStyle){k=k.replace(/([A-Z])/g,"-$1");k=k.toLowerCase();var m=h.defaultView.getComputedStyle(n,"");return m&&m.getPropertyValue(k)}else{return null}}}}function e(h,j,i){if(!i.$$guid){i.$$guid=e.guid++}if(!h.events){h.events={}}var g=h.events[j];if(!g){g=h.events[j]={};if(h["on"+j]){g[0]=h["on"+j]}}g[i.$$guid]=i;h["on"+j]=d}e.guid=1;function a(g,i,h){if(g.events&&g.events[i]){delete g.events[i][h.$$guid]}}function d(k){var j=true;k=k||f(window.event);var g=this.events[k.type];for(var h in g){this.$$handleEvent=g[h];if(this.$$handleEvent(k)===false){j=false}}return j}function f(g){g.preventDefault=f.preventDefault;g.stopPropagation=f.stopPropagation;return g}f.preventDefault=function(){this.returnValue=false};f.stopPropagation=function(){this.cancelBubble=true};if(typeof module!=="undefined"&&module.exports){module.exports=c}else{window.Dialog=c}}());